# Generated by Django 5.2.7 on 2025-10-22 05:04

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('data', '0011_alertevent_alertcomment_and_more'),
    ]

    operations = [
        migrations.CreateModel(
            name='Actuator',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='–°–æ–∑–¥–∞–Ω')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='–û–±–Ω–æ–≤–ª—ë–Ω')),
                ('name', models.CharField(max_length=100, verbose_name='–ù–∞–∑–≤–∞–Ω–∏–µ')),
                ('description', models.TextField(blank=True, verbose_name='–û–ø–∏—Å–∞–Ω–∏–µ')),
                ('actuator_type', models.CharField(choices=[('valve', 'üö∞ –ö–ª–∞–ø–∞–Ω'), ('relay', '‚ö° –†–µ–ª–µ'), ('motor', '‚öôÔ∏è –ú–æ—Ç–æ—Ä'), ('switch', 'üí° –í—ã–∫–ª—é—á–∞—Ç–µ–ª—å'), ('dimmer', 'üîÜ –î–∏–º–º–µ—Ä'), ('pump', 'üíß –ù–∞—Å–æ—Å'), ('fan', 'üåÄ –í–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä'), ('heater', 'üî• –ù–∞–≥—Ä–µ–≤–∞—Ç–µ–ª—å'), ('cooler', '‚ùÑÔ∏è –û—Ö–ª–∞–¥–∏—Ç–µ–ª—å')], max_length=20, verbose_name='–¢–∏–ø —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞')),
                ('modbus_carel', models.BooleanField(default=True, verbose_name='Modbus/CAREL')),
                ('register', models.IntegerField(blank=True, null=True, verbose_name='–†–µ–≥–∏—Å—Ç—Ä Modbus')),
                ('carel_reg', models.CharField(blank=True, max_length=50, verbose_name='–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è CAREL')),
                ('register_type', models.CharField(choices=[('HD', 'Holding Register'), ('CL', 'Coil')], default='HD', max_length=2, verbose_name='–¢–∏–ø —Ä–µ–≥–∏—Å—Ç—Ä–∞')),
                ('min_value', models.FloatField(default=0, verbose_name='–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ')),
                ('max_value', models.FloatField(default=100, verbose_name='–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ')),
                ('default_value', models.FloatField(default=0, verbose_name='–ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é')),
                ('current_value', models.FloatField(blank=True, null=True, verbose_name='–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ')),
                ('last_command_at', models.DateTimeField(blank=True, null=True, verbose_name='–ü–æ—Å–ª–µ–¥–Ω—è—è –∫–æ–º–∞–Ω–¥–∞')),
                ('uom', models.CharField(blank=True, default='%', max_length=20, verbose_name='–ï–¥. –∏–∑–º.')),
                ('is_active', models.BooleanField(default=True, verbose_name='–ê–∫—Ç–∏–≤–µ–Ω')),
                ('is_online', models.BooleanField(default=False, verbose_name='–í —Å–µ—Ç–∏')),
                ('sys', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='actuators', to='data.system', verbose_name='–°–∏—Å—Ç–µ–º–∞')),
            ],
            options={
                'verbose_name': '–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ',
                'verbose_name_plural': '–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞',
                'ordering': ['sys', 'name'],
            },
        ),
        migrations.CreateModel(
            name='ActuatorCommand',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('command_value', models.FloatField(verbose_name='–ó–∞–¥–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ')),
                ('executed_at', models.DateTimeField(auto_now_add=True, verbose_name='–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è')),
                ('status', models.CharField(choices=[('pending', '‚è≥ –û–∂–∏–¥–∞–µ—Ç'), ('success', '‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–∞'), ('failed', '‚ùå –û—à–∏–±–∫–∞'), ('timeout', '‚è±Ô∏è –¢–∞–π–º–∞—É—Ç')], default='pending', max_length=20, verbose_name='–°—Ç–∞—Ç—É—Å')),
                ('response_time_ms', models.IntegerField(blank=True, null=True, verbose_name='–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ (–º—Å)')),
                ('error_message', models.TextField(blank=True, verbose_name='–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ')),
                ('notes', models.TextField(blank=True, verbose_name='–ü—Ä–∏–º–µ—á–∞–Ω–∏—è')),
                ('source_ip', models.GenericIPAddressField(blank=True, null=True, verbose_name='IP –∏—Å—Ç–æ—á–Ω–∏–∫–∞')),
                ('actuator', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='commands', to='data.actuator', verbose_name='–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='actuator_commands', to=settings.AUTH_USER_MODEL, verbose_name='–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å')),
            ],
            options={
                'verbose_name': '–ö–æ–º–∞–Ω–¥–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è',
                'verbose_name_plural': '–ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è',
                'ordering': ['-executed_at'],
            },
        ),
        migrations.AddIndex(
            model_name='actuator',
            index=models.Index(fields=['sys', 'is_active'], name='data_actuat_sys_id_23ede8_idx'),
        ),
        migrations.AddIndex(
            model_name='actuator',
            index=models.Index(fields=['actuator_type'], name='data_actuat_actuato_d49365_idx'),
        ),
        migrations.AddIndex(
            model_name='actuatorcommand',
            index=models.Index(fields=['actuator', '-executed_at'], name='data_actuat_actuato_66872d_idx'),
        ),
        migrations.AddIndex(
            model_name='actuatorcommand',
            index=models.Index(fields=['user', '-executed_at'], name='data_actuat_user_id_0db39f_idx'),
        ),
        migrations.AddIndex(
            model_name='actuatorcommand',
            index=models.Index(fields=['status', '-executed_at'], name='data_actuat_status_8598a7_idx'),
        ),
    ]
