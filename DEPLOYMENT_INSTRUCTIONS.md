# üö® CRITICAL: Manual Deployment Fix Required

## –ü—Ä–æ–±–ª–µ–º–∞
Railway deployment –∑–∞–≤–µ—Ä—à–∏–ª—Å—è, –Ω–æ —Å—Ç–∞—Ä—ã–µ demo –¥–∞–Ω–Ω—ã–µ –ù–ï —É–¥–∞–ª–∏–ª–∏—Å—å.

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–º–∞–Ω–¥–∞ `reset_demo_data` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –¥–µ–ø–ª–æ–µ, –Ω–æ –µ—Å–ª–∏ –≤ –ë–î —É–∂–µ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ, –æ–Ω–∞ –∏—Ö –Ω–µ —Ç—Ä–æ–≥–∞–µ—Ç (–∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è).

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï (2 –í–ê–†–ò–ê–ù–¢–ê)

### –í–∞—Ä–∏–∞–Ω—Ç 1: Railway CLI (–ë–´–°–¢–†–ï–ï)

–ï—Å–ª–∏ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Railway CLI:

```bash
# 1. Login
railway login

# 2. Link –∫ –ø—Ä–æ–µ–∫—Ç—É
railway link

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å reset –≤—Ä—É—á–Ω—É—é
railway run python manage.py reset_demo_data --user admin@promonitor.kz --confirm

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å web service
railway service restart
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: Railway Dashboard + PostgreSQL (–ë–ï–ó CLI)

#### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ PostgreSQL –≤ Railway

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://railway.app/dashboard
2. –ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç `rm-saas-platform`
3. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ **PostgreSQL** plugin
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Data** tab
5. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Connect** –¥–ª—è psql

#### –®–∞–≥ 2: –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å–æ–º

```sql
-- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ë–î –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

-- 1. –ù–∞–π—Ç–∏ company_id –¥–ª—è admin@promonitor.kz
SELECT id, name FROM data_company WHERE name LIKE '%ProMonitor%';
-- –ó–∞–ø–æ–º–Ω–∏—Ç–µ ID (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1)

-- 2. –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏ (–ó–ê–ú–ï–ù–ò–¢–ï 1 –Ω–∞ –≤–∞—à company_id)
DELETE FROM data_data WHERE name_id IN (
    SELECT a.id FROM data_atributes a
    JOIN data_system s ON a.sys_id = s.id
    JOIN data_obj o ON s.obj_id = o.id
    WHERE o.company_id = 1
);

DELETE FROM data_alertrule WHERE company_id = 1;

DELETE FROM data_atributes WHERE sys_id IN (
    SELECT s.id FROM data_system s
    JOIN data_obj o ON s.obj_id = o.id
    WHERE o.company_id = 1
);

DELETE FROM data_system WHERE obj_id IN (
    SELECT id FROM data_obj WHERE company_id = 1
);

DELETE FROM data_obj WHERE company_id = 1;
```

#### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ web service

1. Railway Dashboard ‚Üí Web Service
2. –ù–∞–∂–º–∏—Ç–µ **"..."** (—Ç—Ä–∏ —Ç–æ—á–∫–∏) ‚Üí **Restart**
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ (2-3 –º–∏–Ω—É—Ç—ã)
4. –ü—Ä–∏ restart –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è `reset_demo_data`

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: Django Admin (–ß–ï–†–ï–ó –ë–†–ê–£–ó–ï–†)

–ï—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SQL:

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://www.promonitor.kz/admin/
2. Login: superadmin@promonitor.kz / Super123!
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Data ‚Üí Objects (Obj)**
4. –í—ã–±–µ—Ä–∏—Ç–µ –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã (–≥–∞–ª–æ—á–∫–∞ –≤–≤–µ—Ä—Ö—É)
5. Actions ‚Üí **Delete selected objects**
6. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ

**‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï:** –≠—Ç–æ —É–¥–∞–ª–∏—Ç –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã, –¥–∞—Ç—á–∏–∫–∏ –∏ –¥–∞–Ω–Ω—ã–µ!

–ó–∞—Ç–µ–º:
1. Railway Dashboard ‚Üí Web Service ‚Üí Restart
2. –ü—Ä–∏ restart –∑–∞–≥—Ä—É–∑—è—Ç—Å—è –Ω–æ–≤—ã–µ demo –¥–∞–Ω–Ω—ã–µ

---

## üîç –ü–†–û–í–ï–†–ö–ê –ü–û–°–õ–ï –£–î–ê–õ–ï–ù–ò–Ø

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ª—é–±–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **Railway Deploy Logs:**
   ```
   ‚úÖ Demo data reset and reloaded!
   üìä Fresh data:
      ‚Ä¢ 10 realistic objects with full monitoring
   ```

2. **–°–∞–π—Ç:**
   ```
   https://www.promonitor.kz/objects/
   ```
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å **—Ä–æ–≤–Ω–æ 10 –æ–±—ä–µ–∫—Ç–æ–≤**
   - –ù–∞–∑–≤–∞–Ω–∏—è: "–î–∞—Ç–∞-—Ü–µ–Ω—Ç—Ä –ê–ª–º–∞—Ç—ã", "–û—Ñ–∏—Å–Ω–æ–µ –∑–¥–∞–Ω–∏–µ –Ω–∞ –ê–±–∞—è" –∏ —Ç.–¥.

3. **–î–µ—Ç–∞–ª—å–Ω—ã–π –¥–∞—à–±–æ—Ä–¥:**
   ```
   https://www.promonitor.kz/objects/1/
   ```
   - Gauge –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ **–ù–ï –Ω—É–ª–∏**
   - –°–∏—Å—Ç–µ–º—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
   - –î–∞—Ç—á–∏–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è

---

## üí° –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ê: –ò–∑–º–µ–Ω–∏—Ç—å start_web.sh

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ **–ü–†–ò–ù–£–î–ò–¢–ï–õ–¨–ù–û** —É–¥–∞–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ:

1. –ò–∑–º–µ–Ω–∏—Ç–µ –≤ Railway Environment Variables:
   ```
   RESET_DEMO_DATA=true
   ```

2. –û–±–Ω–æ–≤–∏—Ç–µ start_web.sh:
   ```bash
   if [ "$RESET_DEMO_DATA" = "true" ]; then
       python manage.py reset_demo_data --user admin@promonitor.kz --confirm
   else
       python manage.py load_quality_demo --user admin@promonitor.kz
   fi
   ```

–ù–æ —ç—Ç–æ **–ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** –¥–ª—è production!

---

## ‚ùì –ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?

**Railway –Ω–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Ç–æ–º—É —á—Ç–æ:**

1. `load_quality_demo` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
2. –ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç—ã —É–∂–µ –µ—Å—Ç—å ‚Üí skip –∑–∞–≥—Ä—É–∑–∫–∏
3. –≠—Ç–æ –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:**
- –í—Ä—É—á–Ω—É—é —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ (1 —Ä–∞–∑)
- –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–∏—Ö –¥–µ–ø–ª–æ—è—Ö –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ

---

## üìû –ß—Ç–æ –¥–µ–ª–∞—Ç—å?

**–í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤—ã—à–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ.**

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ:
- –ö–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏
- –°–∫–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç–æ–≤ —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ /objects/
- –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –¥–µ—Ç–∞–ª—å–Ω—ã–π –¥–∞—à–±–æ—Ä–¥

–Ø –ø–æ–º–æ–≥—É –µ—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã! üöÄ

---

**Created:** 2025-10-21 12:15  
**Status:** ‚ö†Ô∏è MANUAL ACTION REQUIRED  
**Priority:** üî¥ HIGH
